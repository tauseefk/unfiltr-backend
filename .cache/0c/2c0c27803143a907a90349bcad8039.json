{"id":"DKHt","dependencies":[{"name":"/Users/mdtauseef/personal/unfiltr-backend/package.json","includedInParent":true,"mtime":1617736870369},{"name":"uuid/v1","loc":{"line":3,"column":17},"parent":"/Users/mdtauseef/personal/unfiltr-backend/client/messenger.js","resolved":"/Users/mdtauseef/personal/unfiltr-backend/node_modules/uuid/v1.js"},{"name":"observable-stream","loc":{"line":4,"column":19},"parent":"/Users/mdtauseef/personal/unfiltr-backend/client/messenger.js","resolved":"/Users/mdtauseef/personal/unfiltr-backend/node_modules/observable-stream/observable-stream.js"},{"name":"./utils","loc":{"line":5,"column":78},"parent":"/Users/mdtauseef/personal/unfiltr-backend/client/messenger.js","resolved":"/Users/mdtauseef/personal/unfiltr-backend/client/utils.ts"},{"name":"../events","loc":{"line":6,"column":19},"parent":"/Users/mdtauseef/personal/unfiltr-backend/client/messenger.js","resolved":"/Users/mdtauseef/personal/unfiltr-backend/events.js"}],"generated":{"js":"\"use strict\";var e=a(require(\"uuid/v1\")),t=a(require(\"observable-stream\")),n=require(\"./utils\"),i=a(require(\"../events\"));function a(e){return e&&e.__esModule?e:{default:e}}var s=window.location.port?\":\"+window.location.port:\"\",u=\"\".concat(window.location.hostname).concat(s),d=io.connect(u),o=null,r=null,l=null,c=null,f=null,m=null,E=new Map,g=(0,n.keyIs)(\"enter\"),v=(0,n.delay)(1e3),p=(0,n.delay)(250);d.on(i.default.INFO,function(e){var t=e.id,n=e.connectedUsers;c=t,n.filter(function(e){return e!==c}).forEach(function(e){N({userId:e})})});var I=new t.default(function(e){d.on(i.default.USER_CONNECTED,e.next),d.on(i.default.USER_DISCONNETED,e.complete)}),x=new t.default(function(e){d.on(i.default.NEW_MESSAGE,e.next),d.on(i.default.DISCONNECT,e.complete)}),b=new t.default(function(e){d.on(i.default.TYPING,e.next),d.on(i.default.STOPPED_TYPING,e.complete)}),y=new t.default(function(e){d.on(i.default.MESSAGE_ID,e.next)}),w=new t.default(function(e){d.on(i.default.EMPHASIZE_MESSAGE,e.next)}),L=function(e,t){var i=e.message,a=e.id;if(i){var s=document.createElement(\"div\");s.textContent=i,o.appendChild(s),s.classList.add(\"j-message\"),s.id=a,t?s.classList.add(\"owner-self\"):s.classList.add(\"owner-other\"),(0,n.promisifiedRAF)().then(function(){return s.classList.add(\"visible\")}),s.scrollIntoView()}},S=function(e){var t=e.id,n=e.updatedId,i=document.getElementById(t);i.classList.add(\"j-updated-id\"),i.id=n},h=function(){d.emit(i.default.TYPING,{userId:c})},C=function(e){var t=e.message,n=e.id,a=e.textEl;d.emit(i.default.NEW_MESSAGE,{from:c,message:t,id:n}),a.value=\"\"},N=function(e){var t=e.userId;if(!E.has(t)){var i=document.createElement(\"span\");i.classList.add(\"user\",\"u-float-right\"),i.style.backgroundColor=(0,n.getRandomColor)(),m.appendChild(i),E.set(t,i)}},A=function(e){var t=e.userId;E.has(t)&&(E.get(t).remove(),E.delete(t))},M=function(e){var t=e.userId;E.has(t)&&E.get(t).classList.add(\"typing\")},_=function(e){var t=e.userId;E.has(t)&&E.get(t).classList.remove(\"typing\")},k=function(e){var t=e.target,a=e.id;t.classList.add(\"large\"),t.classList.contains(\"j-updated-id\")?d.emit(i.default.EMPHASIZE_MESSAGE,{id:a}):(0,n.promisifiedRAF)().then(p).then(function(){t.classList.remove(\"large\")})},D=function(e){var t=e.id;document.getElementById(t).classList.add(\"large\")};document.addEventListener(\"DOMContentLoaded\",function(){f=document.getElementById(\"title\"),l=document.getElementById(\"send\"),m=document.getElementById(\"activeUsers\"),o=document.getElementById(\"messages\"),r=document.getElementById(\"textInput\");var i=t.default.fromEvent(\"keydown\",r),a=t.default.fromEvent(\"click\",l),s=t.default.fromEvent(\"click\",o);(0,n.promisifiedRAF)().then(function(){return f.classList.add(\"u-fade\")}).then(v).then(function(){return f.style.display=\"none\"}),r.focus(),r.select(),I.subscribe({next:N,complete:A}),i.filter(function(e){return g(e.keyCode)}).map(function(t){return{message:t.target.value.trim(),e:t,textEl:t.target,id:(0,e.default)()}}).subscribe({next:function(e){var t=e.message,n=e.id,i=e.textEl;e.e.preventDefault(),C({message:t,textEl:i,id:n}),L({message:t,id:n},!0)}}),i.filter(function(e){return!g(e.keyCode)}).subscribe({next:h,complete:function(){}}),a.map(function(){return{message:r.value.trim(),textEl:r}}).subscribe({next:function(t){var n=t.message,i=t.textEl,a=(0,e.default)();C({message:n,id:a,textEl:i}),L({message:n,id:a},!0)},complete:function(){}}),x.filter(function(e){return e.from!==c}).subscribe({next:L,complete:function(){}}),y.subscribe({next:S}),s.filter(function(e){return e.target&&e.target.classList.contains(\"j-message\")&&e.target.classList.contains(\"owner-self\")}).filter((0,n.takeContinuousN)(5)).map(function(e){return{target:e.target,id:e.target.id}}).subscribe({next:k,complete:function(){}}),w.subscribe({next:function(e){var t=e.id;D({id:t})}}),b.subscribe({next:M,complete:_})});"},"sourceMaps":{"js":{"mappings":[{"source":"messenger.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"messenger.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"messenger.js","original":{"line":3,"column":0},"generated":{"line":1,"column":17}},{"source":"messenger.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"messenger.js","original":{"line":3,"column":0},"generated":{"line":1,"column":21}},{"source":"messenger.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"messenger.js","original":{"line":4,"column":0},"generated":{"line":1,"column":41}},{"source":"messenger.js","original":{"line":4,"column":0},"generated":{"line":1,"column":43}},{"source":"messenger.js","original":{"line":4,"column":0},"generated":{"line":1,"column":45}},{"source":"messenger.js","original":{"line":4,"column":0},"generated":{"line":1,"column":53}},{"source":"messenger.js","original":{"line":5,"column":0},"generated":{"line":1,"column":75}},{"source":"messenger.js","original":{"line":5,"column":0},"generated":{"line":1,"column":77}},{"source":"messenger.js","original":{"line":5,"column":0},"generated":{"line":1,"column":85}},{"source":"messenger.js","original":{"line":6,"column":0},"generated":{"line":1,"column":96}},{"source":"messenger.js","original":{"line":6,"column":0},"generated":{"line":1,"column":98}},{"source":"messenger.js","original":{"line":6,"column":0},"generated":{"line":1,"column":100}},{"source":"messenger.js","original":{"line":6,"column":0},"generated":{"line":1,"column":108}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":122}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":131}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":133}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":136}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":143}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":146}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":148}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":159}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":161}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":162}},{"source":"messenger.js","original":{"line":142,"column":0},"generated":{"line":1,"column":170}},{"source":"messenger.js","original":{"line":8,"column":0},"generated":{"line":1,"column":173}},{"source":"messenger.js","name":"port","original":{"line":8,"column":6},"generated":{"line":1,"column":177}},{"source":"messenger.js","name":"window","original":{"line":8,"column":13},"generated":{"line":1,"column":179}},{"source":"messenger.js","name":"location","original":{"line":8,"column":20},"generated":{"line":1,"column":186}},{"source":"messenger.js","name":"port","original":{"line":8,"column":29},"generated":{"line":1,"column":195}},{"source":"messenger.js","original":{"line":8,"column":36},"generated":{"line":1,"column":200}},{"source":"messenger.js","name":"window","original":{"line":8,"column":42},"generated":{"line":1,"column":204}},{"source":"messenger.js","name":"location","original":{"line":8,"column":49},"generated":{"line":1,"column":211}},{"source":"messenger.js","name":"port","original":{"line":8,"column":58},"generated":{"line":1,"column":220}},{"source":"messenger.js","original":{"line":8,"column":65},"generated":{"line":1,"column":225}},{"source":"messenger.js","name":"host","original":{"line":9,"column":6},"generated":{"line":1,"column":228}},{"source":"messenger.js","name":"window","original":{"line":9,"column":16},"generated":{"line":1,"column":230}},{"source":"messenger.js","name":"window","original":{"line":9,"column":16},"generated":{"line":1,"column":233}},{"source":"messenger.js","name":"window","original":{"line":9,"column":16},"generated":{"line":1,"column":240}},{"source":"messenger.js","name":"location","original":{"line":9,"column":23},"generated":{"line":1,"column":247}},{"source":"messenger.js","name":"hostname","original":{"line":9,"column":32},"generated":{"line":1,"column":256}},{"source":"messenger.js","name":"port","original":{"line":9,"column":43},"generated":{"line":1,"column":266}},{"source":"messenger.js","name":"port","original":{"line":9,"column":43},"generated":{"line":1,"column":273}},{"source":"messenger.js","name":"socket","original":{"line":10,"column":6},"generated":{"line":1,"column":276}},{"source":"messenger.js","name":"io","original":{"line":10,"column":15},"generated":{"line":1,"column":278}},{"source":"messenger.js","name":"connect","original":{"line":10,"column":18},"generated":{"line":1,"column":281}},{"source":"messenger.js","name":"host","original":{"line":10,"column":26},"generated":{"line":1,"column":289}},{"source":"messenger.js","name":"messagesEl","original":{"line":11,"column":4},"generated":{"line":1,"column":292}},{"source":"messenger.js","original":{"line":11,"column":17},"generated":{"line":1,"column":294}},{"source":"messenger.js","name":"textInputEl","original":{"line":12,"column":4},"generated":{"line":1,"column":299}},{"source":"messenger.js","original":{"line":12,"column":18},"generated":{"line":1,"column":301}},{"source":"messenger.js","name":"sendButtonEl","original":{"line":13,"column":4},"generated":{"line":1,"column":306}},{"source":"messenger.js","original":{"line":13,"column":19},"generated":{"line":1,"column":308}},{"source":"messenger.js","name":"userId","original":{"line":14,"column":4},"generated":{"line":1,"column":313}},{"source":"messenger.js","original":{"line":14,"column":13},"generated":{"line":1,"column":315}},{"source":"messenger.js","name":"titleEl","original":{"line":15,"column":4},"generated":{"line":1,"column":320}},{"source":"messenger.js","original":{"line":15,"column":14},"generated":{"line":1,"column":322}},{"source":"messenger.js","name":"activeUsersEl","original":{"line":16,"column":4},"generated":{"line":1,"column":327}},{"source":"messenger.js","original":{"line":16,"column":20},"generated":{"line":1,"column":329}},{"source":"messenger.js","name":"activeUsers","original":{"line":17,"column":6},"generated":{"line":1,"column":334}},{"source":"messenger.js","original":{"line":17,"column":20},"generated":{"line":1,"column":336}},{"source":"messenger.js","name":"Map","original":{"line":17,"column":24},"generated":{"line":1,"column":340}},{"source":"messenger.js","name":"keyIsEnter","original":{"line":19,"column":6},"generated":{"line":1,"column":344}},{"source":"messenger.js","original":{"line":19,"column":19},"generated":{"line":1,"column":347}},{"source":"messenger.js","original":{"line":19,"column":25},"generated":{"line":1,"column":349}},{"source":"messenger.js","original":{"line":19,"column":25},"generated":{"line":1,"column":351}},{"source":"messenger.js","original":{"line":19,"column":25},"generated":{"line":1,"column":358}},{"source":"messenger.js","name":"delayShort","original":{"line":21,"column":6},"generated":{"line":1,"column":367}},{"source":"messenger.js","original":{"line":21,"column":19},"generated":{"line":1,"column":370}},{"source":"messenger.js","original":{"line":21,"column":25},"generated":{"line":1,"column":372}},{"source":"messenger.js","original":{"line":21,"column":25},"generated":{"line":1,"column":374}},{"source":"messenger.js","original":{"line":21,"column":25},"generated":{"line":1,"column":381}},{"source":"messenger.js","name":"delayTiny","original":{"line":22,"column":6},"generated":{"line":1,"column":386}},{"source":"messenger.js","original":{"line":22,"column":18},"generated":{"line":1,"column":389}},{"source":"messenger.js","original":{"line":22,"column":24},"generated":{"line":1,"column":391}},{"source":"messenger.js","original":{"line":22,"column":24},"generated":{"line":1,"column":393}},{"source":"messenger.js","original":{"line":22,"column":24},"generated":{"line":1,"column":400}},{"source":"messenger.js","name":"socket","original":{"line":24,"column":0},"generated":{"line":1,"column":405}},{"source":"messenger.js","name":"on","original":{"line":24,"column":7},"generated":{"line":1,"column":407}},{"source":"messenger.js","name":"events","original":{"line":24,"column":10},"generated":{"line":1,"column":410}},{"source":"messenger.js","name":"INFO","original":{"line":24,"column":17},"generated":{"line":1,"column":412}},{"source":"messenger.js","name":"INFO","original":{"line":24,"column":17},"generated":{"line":1,"column":420}},{"source":"messenger.js","original":{"line":24,"column":23},"generated":{"line":1,"column":425}},{"source":"messenger.js","original":{"line":24,"column":51},"generated":{"line":1,"column":434}},{"source":"messenger.js","name":"id","original":{"line":24,"column":26},"generated":{"line":1,"column":437}},{"source":"messenger.js","name":"id","original":{"line":24,"column":26},"generated":{"line":1,"column":441}},{"source":"messenger.js","name":"id","original":{"line":24,"column":26},"generated":{"line":1,"column":443}},{"source":"messenger.js","name":"id","original":{"line":24,"column":26},"generated":{"line":1,"column":445}},{"source":"messenger.js","name":"connectedUsers","original":{"line":24,"column":30},"generated":{"line":1,"column":448}},{"source":"messenger.js","name":"connectedUsers","original":{"line":24,"column":30},"generated":{"line":1,"column":450}},{"source":"messenger.js","name":"connectedUsers","original":{"line":24,"column":30},"generated":{"line":1,"column":452}},{"source":"messenger.js","name":"userId","original":{"line":25,"column":2},"generated":{"line":1,"column":467}},{"source":"messenger.js","name":"id","original":{"line":25,"column":11},"generated":{"line":1,"column":469}},{"source":"messenger.js","name":"connectedUsers","original":{"line":26,"column":2},"generated":{"line":1,"column":471}},{"source":"messenger.js","name":"filter","original":{"line":27,"column":5},"generated":{"line":1,"column":473}},{"source":"messenger.js","original":{"line":27,"column":12},"generated":{"line":1,"column":480}},{"source":"messenger.js","name":"user","original":{"line":27,"column":13},"generated":{"line":1,"column":489}},{"source":"messenger.js","name":"user","original":{"line":27,"column":22},"generated":{"line":1,"column":492}},{"source":"messenger.js","name":"user","original":{"line":27,"column":22},"generated":{"line":1,"column":499}},{"source":"messenger.js","name":"userId","original":{"line":27,"column":31},"generated":{"line":1,"column":503}},{"source":"messenger.js","name":"forEach","original":{"line":28,"column":5},"generated":{"line":1,"column":507}},{"source":"messenger.js","original":{"line":28,"column":13},"generated":{"line":1,"column":515}},{"source":"messenger.js","name":"user","original":{"line":28,"column":14},"generated":{"line":1,"column":524}},{"source":"messenger.js","name":"addToActiveUsers","original":{"line":29,"column":6},"generated":{"line":1,"column":527}},{"source":"messenger.js","original":{"line":29,"column":23},"generated":{"line":1,"column":529}},{"source":"messenger.js","name":"userId","original":{"line":29,"column":25},"generated":{"line":1,"column":530}},{"source":"messenger.js","name":"user","original":{"line":29,"column":33},"generated":{"line":1,"column":537}},{"source":"messenger.js","original":{"line":33,"column":0},"generated":{"line":1,"column":545}},{"source":"messenger.js","name":"$connections","original":{"line":33,"column":6},"generated":{"line":1,"column":549}},{"source":"messenger.js","original":{"line":33,"column":21},"generated":{"line":1,"column":551}},{"source":"messenger.js","name":"Stream","original":{"line":33,"column":25},"generated":{"line":1,"column":555}},{"source":"messenger.js","original":{"line":33,"column":21},"generated":{"line":1,"column":557}},{"source":"messenger.js","original":{"line":33,"column":32},"generated":{"line":1,"column":565}},{"source":"messenger.js","name":"observer","original":{"line":33,"column":33},"generated":{"line":1,"column":574}},{"source":"messenger.js","name":"socket","original":{"line":34,"column":2},"generated":{"line":1,"column":577}},{"source":"messenger.js","name":"on","original":{"line":34,"column":9},"generated":{"line":1,"column":579}},{"source":"messenger.js","name":"events","original":{"line":34,"column":12},"generated":{"line":1,"column":582}},{"source":"messenger.js","name":"USER_CONNECTED","original":{"line":34,"column":19},"generated":{"line":1,"column":584}},{"source":"messenger.js","name":"USER_CONNECTED","original":{"line":34,"column":19},"generated":{"line":1,"column":592}},{"source":"messenger.js","name":"observer","original":{"line":34,"column":35},"generated":{"line":1,"column":607}},{"source":"messenger.js","name":"next","original":{"line":34,"column":44},"generated":{"line":1,"column":609}},{"source":"messenger.js","name":"socket","original":{"line":35,"column":2},"generated":{"line":1,"column":615}},{"source":"messenger.js","name":"on","original":{"line":35,"column":9},"generated":{"line":1,"column":617}},{"source":"messenger.js","name":"events","original":{"line":35,"column":12},"generated":{"line":1,"column":620}},{"source":"messenger.js","name":"USER_DISCONNETED","original":{"line":35,"column":19},"generated":{"line":1,"column":622}},{"source":"messenger.js","name":"USER_DISCONNETED","original":{"line":35,"column":19},"generated":{"line":1,"column":630}},{"source":"messenger.js","name":"observer","original":{"line":35,"column":37},"generated":{"line":1,"column":647}},{"source":"messenger.js","name":"complete","original":{"line":35,"column":46},"generated":{"line":1,"column":649}},{"source":"messenger.js","name":"$messages","original":{"line":38,"column":6},"generated":{"line":1,"column":661}},{"source":"messenger.js","original":{"line":38,"column":18},"generated":{"line":1,"column":663}},{"source":"messenger.js","name":"Stream","original":{"line":38,"column":22},"generated":{"line":1,"column":667}},{"source":"messenger.js","original":{"line":38,"column":18},"generated":{"line":1,"column":669}},{"source":"messenger.js","original":{"line":38,"column":29},"generated":{"line":1,"column":677}},{"source":"messenger.js","name":"observer","original":{"line":38,"column":30},"generated":{"line":1,"column":686}},{"source":"messenger.js","name":"socket","original":{"line":39,"column":2},"generated":{"line":1,"column":689}},{"source":"messenger.js","name":"on","original":{"line":39,"column":9},"generated":{"line":1,"column":691}},{"source":"messenger.js","name":"events","original":{"line":39,"column":12},"generated":{"line":1,"column":694}},{"source":"messenger.js","name":"NEW_MESSAGE","original":{"line":39,"column":19},"generated":{"line":1,"column":696}},{"source":"messenger.js","name":"NEW_MESSAGE","original":{"line":39,"column":19},"generated":{"line":1,"column":704}},{"source":"messenger.js","name":"observer","original":{"line":39,"column":32},"generated":{"line":1,"column":716}},{"source":"messenger.js","name":"next","original":{"line":39,"column":41},"generated":{"line":1,"column":718}},{"source":"messenger.js","name":"socket","original":{"line":40,"column":2},"generated":{"line":1,"column":724}},{"source":"messenger.js","name":"on","original":{"line":40,"column":9},"generated":{"line":1,"column":726}},{"source":"messenger.js","name":"events","original":{"line":40,"column":12},"generated":{"line":1,"column":729}},{"source":"messenger.js","name":"DISCONNECT","original":{"line":40,"column":19},"generated":{"line":1,"column":731}},{"source":"messenger.js","name":"DISCONNECT","original":{"line":40,"column":19},"generated":{"line":1,"column":739}},{"source":"messenger.js","name":"observer","original":{"line":40,"column":31},"generated":{"line":1,"column":750}},{"source":"messenger.js","name":"complete","original":{"line":40,"column":40},"generated":{"line":1,"column":752}},{"source":"messenger.js","name":"$userTyping","original":{"line":43,"column":6},"generated":{"line":1,"column":764}},{"source":"messenger.js","original":{"line":43,"column":20},"generated":{"line":1,"column":766}},{"source":"messenger.js","name":"Stream","original":{"line":43,"column":24},"generated":{"line":1,"column":770}},{"source":"messenger.js","original":{"line":43,"column":20},"generated":{"line":1,"column":772}},{"source":"messenger.js","original":{"line":43,"column":31},"generated":{"line":1,"column":780}},{"source":"messenger.js","name":"observer","original":{"line":43,"column":32},"generated":{"line":1,"column":789}},{"source":"messenger.js","name":"socket","original":{"line":44,"column":2},"generated":{"line":1,"column":792}},{"source":"messenger.js","name":"on","original":{"line":44,"column":9},"generated":{"line":1,"column":794}},{"source":"messenger.js","name":"events","original":{"line":44,"column":12},"generated":{"line":1,"column":797}},{"source":"messenger.js","name":"TYPING","original":{"line":44,"column":19},"generated":{"line":1,"column":799}},{"source":"messenger.js","name":"TYPING","original":{"line":44,"column":19},"generated":{"line":1,"column":807}},{"source":"messenger.js","name":"observer","original":{"line":44,"column":27},"generated":{"line":1,"column":814}},{"source":"messenger.js","name":"next","original":{"line":44,"column":36},"generated":{"line":1,"column":816}},{"source":"messenger.js","name":"socket","original":{"line":45,"column":2},"generated":{"line":1,"column":822}},{"source":"messenger.js","name":"on","original":{"line":45,"column":9},"generated":{"line":1,"column":824}},{"source":"messenger.js","name":"events","original":{"line":45,"column":12},"generated":{"line":1,"column":827}},{"source":"messenger.js","name":"STOPPED_TYPING","original":{"line":45,"column":19},"generated":{"line":1,"column":829}},{"source":"messenger.js","name":"STOPPED_TYPING","original":{"line":45,"column":19},"generated":{"line":1,"column":837}},{"source":"messenger.js","name":"observer","original":{"line":45,"column":35},"generated":{"line":1,"column":852}},{"source":"messenger.js","name":"complete","original":{"line":45,"column":44},"generated":{"line":1,"column":854}},{"source":"messenger.js","name":"$messageId","original":{"line":48,"column":6},"generated":{"line":1,"column":866}},{"source":"messenger.js","original":{"line":48,"column":19},"generated":{"line":1,"column":868}},{"source":"messenger.js","name":"Stream","original":{"line":48,"column":23},"generated":{"line":1,"column":872}},{"source":"messenger.js","original":{"line":48,"column":19},"generated":{"line":1,"column":874}},{"source":"messenger.js","original":{"line":48,"column":30},"generated":{"line":1,"column":882}},{"source":"messenger.js","name":"observer","original":{"line":48,"column":31},"generated":{"line":1,"column":891}},{"source":"messenger.js","name":"socket","original":{"line":49,"column":2},"generated":{"line":1,"column":894}},{"source":"messenger.js","name":"on","original":{"line":49,"column":9},"generated":{"line":1,"column":896}},{"source":"messenger.js","name":"events","original":{"line":49,"column":12},"generated":{"line":1,"column":899}},{"source":"messenger.js","name":"MESSAGE_ID","original":{"line":49,"column":19},"generated":{"line":1,"column":901}},{"source":"messenger.js","name":"MESSAGE_ID","original":{"line":49,"column":19},"generated":{"line":1,"column":909}},{"source":"messenger.js","name":"observer","original":{"line":49,"column":31},"generated":{"line":1,"column":920}},{"source":"messenger.js","name":"next","original":{"line":49,"column":40},"generated":{"line":1,"column":922}},{"source":"messenger.js","name":"$emphasizeMessage","original":{"line":52,"column":6},"generated":{"line":1,"column":930}},{"source":"messenger.js","original":{"line":52,"column":26},"generated":{"line":1,"column":932}},{"source":"messenger.js","name":"Stream","original":{"line":52,"column":30},"generated":{"line":1,"column":936}},{"source":"messenger.js","original":{"line":52,"column":26},"generated":{"line":1,"column":938}},{"source":"messenger.js","original":{"line":52,"column":37},"generated":{"line":1,"column":946}},{"source":"messenger.js","name":"observer","original":{"line":52,"column":38},"generated":{"line":1,"column":955}},{"source":"messenger.js","name":"socket","original":{"line":53,"column":2},"generated":{"line":1,"column":958}},{"source":"messenger.js","name":"on","original":{"line":53,"column":9},"generated":{"line":1,"column":960}},{"source":"messenger.js","name":"events","original":{"line":53,"column":12},"generated":{"line":1,"column":963}},{"source":"messenger.js","name":"EMPHASIZE_MESSAGE","original":{"line":53,"column":19},"generated":{"line":1,"column":965}},{"source":"messenger.js","name":"EMPHASIZE_MESSAGE","original":{"line":53,"column":19},"generated":{"line":1,"column":973}},{"source":"messenger.js","name":"observer","original":{"line":53,"column":38},"generated":{"line":1,"column":991}},{"source":"messenger.js","name":"next","original":{"line":53,"column":47},"generated":{"line":1,"column":993}},{"source":"messenger.js","name":"addMessageToChat","original":{"line":62,"column":6},"generated":{"line":1,"column":1001}},{"source":"messenger.js","original":{"line":62,"column":25},"generated":{"line":1,"column":1003}},{"source":"messenger.js","name":"isOwn","original":{"line":62,"column":43},"generated":{"line":1,"column":1012}},{"source":"messenger.js","name":"isOwn","original":{"line":62,"column":43},"generated":{"line":1,"column":1014}},{"source":"messenger.js","name":"message","original":{"line":62,"column":28},"generated":{"line":1,"column":1017}},{"source":"messenger.js","name":"message","original":{"line":62,"column":28},"generated":{"line":1,"column":1021}},{"source":"messenger.js","name":"message","original":{"line":62,"column":28},"generated":{"line":1,"column":1023}},{"source":"messenger.js","name":"message","original":{"line":62,"column":28},"generated":{"line":1,"column":1025}},{"source":"messenger.js","name":"id","original":{"line":62,"column":37},"generated":{"line":1,"column":1033}},{"source":"messenger.js","name":"id","original":{"line":62,"column":37},"generated":{"line":1,"column":1035}},{"source":"messenger.js","name":"id","original":{"line":62,"column":37},"generated":{"line":1,"column":1037}},{"source":"messenger.js","original":{"line":63,"column":6},"generated":{"line":1,"column":1040}},{"source":"messenger.js","name":"message","original":{"line":63,"column":7},"generated":{"line":1,"column":1043}},{"source":"messenger.js","original":{"line":63,"column":6},"generated":{"line":1,"column":1045}},{"source":"messenger.js","name":"mEl","original":{"line":65,"column":8},"generated":{"line":1,"column":1046}},{"source":"messenger.js","name":"mEl","original":{"line":65,"column":8},"generated":{"line":1,"column":1050}},{"source":"messenger.js","name":"document","original":{"line":65,"column":14},"generated":{"line":1,"column":1052}},{"source":"messenger.js","name":"createElement","original":{"line":65,"column":23},"generated":{"line":1,"column":1061}},{"source":"messenger.js","original":{"line":65,"column":37},"generated":{"line":1,"column":1075}},{"source":"messenger.js","name":"mEl","original":{"line":66,"column":2},"generated":{"line":1,"column":1082}},{"source":"messenger.js","name":"textContent","original":{"line":66,"column":6},"generated":{"line":1,"column":1084}},{"source":"messenger.js","name":"message","original":{"line":66,"column":20},"generated":{"line":1,"column":1096}},{"source":"messenger.js","name":"messagesEl","original":{"line":67,"column":2},"generated":{"line":1,"column":1098}},{"source":"messenger.js","name":"appendChild","original":{"line":67,"column":13},"generated":{"line":1,"column":1100}},{"source":"messenger.js","name":"mEl","original":{"line":67,"column":25},"generated":{"line":1,"column":1112}},{"source":"messenger.js","name":"mEl","original":{"line":68,"column":2},"generated":{"line":1,"column":1115}},{"source":"messenger.js","name":"classList","original":{"line":68,"column":6},"generated":{"line":1,"column":1117}},{"source":"messenger.js","name":"add","original":{"line":68,"column":16},"generated":{"line":1,"column":1127}},{"source":"messenger.js","original":{"line":68,"column":20},"generated":{"line":1,"column":1131}},{"source":"messenger.js","name":"mEl","original":{"line":69,"column":2},"generated":{"line":1,"column":1144}},{"source":"messenger.js","name":"id","original":{"line":69,"column":6},"generated":{"line":1,"column":1146}},{"source":"messenger.js","name":"id","original":{"line":69,"column":11},"generated":{"line":1,"column":1149}},{"source":"messenger.js","name":"isOwn","original":{"line":70,"column":2},"generated":{"line":1,"column":1151}},{"source":"messenger.js","name":"mEl","original":{"line":70,"column":10},"generated":{"line":1,"column":1153}},{"source":"messenger.js","name":"classList","original":{"line":70,"column":14},"generated":{"line":1,"column":1155}},{"source":"messenger.js","name":"add","original":{"line":70,"column":24},"generated":{"line":1,"column":1165}},{"source":"messenger.js","original":{"line":70,"column":28},"generated":{"line":1,"column":1169}},{"source":"messenger.js","name":"mEl","original":{"line":70,"column":44},"generated":{"line":1,"column":1183}},{"source":"messenger.js","name":"classList","original":{"line":70,"column":48},"generated":{"line":1,"column":1185}},{"source":"messenger.js","name":"add","original":{"line":70,"column":58},"generated":{"line":1,"column":1195}},{"source":"messenger.js","original":{"line":70,"column":62},"generated":{"line":1,"column":1199}},{"source":"messenger.js","name":"then","original":{"line":71,"column":19},"generated":{"line":1,"column":1215}},{"source":"messenger.js","name":"then","original":{"line":71,"column":19},"generated":{"line":1,"column":1217}},{"source":"messenger.js","name":"then","original":{"line":71,"column":19},"generated":{"line":1,"column":1219}},{"source":"messenger.js","name":"then","original":{"line":71,"column":19},"generated":{"line":1,"column":1237}},{"source":"messenger.js","original":{"line":71,"column":24},"generated":{"line":1,"column":1242}},{"source":"messenger.js","name":"mEl","original":{"line":71,"column":30},"generated":{"line":1,"column":1253}},{"source":"messenger.js","name":"mEl","original":{"line":71,"column":30},"generated":{"line":1,"column":1260}},{"source":"messenger.js","name":"classList","original":{"line":71,"column":34},"generated":{"line":1,"column":1262}},{"source":"messenger.js","name":"add","original":{"line":71,"column":44},"generated":{"line":1,"column":1272}},{"source":"messenger.js","original":{"line":71,"column":48},"generated":{"line":1,"column":1276}},{"source":"messenger.js","name":"mEl","original":{"line":72,"column":2},"generated":{"line":1,"column":1289}},{"source":"messenger.js","name":"scrollIntoView","original":{"line":72,"column":6},"generated":{"line":1,"column":1291}},{"source":"messenger.js","name":"updateMessageId","original":{"line":75,"column":6},"generated":{"line":1,"column":1310}},{"source":"messenger.js","original":{"line":75,"column":24},"generated":{"line":1,"column":1312}},{"source":"messenger.js","original":{"line":75,"column":47},"generated":{"line":1,"column":1321}},{"source":"messenger.js","name":"id","original":{"line":75,"column":27},"generated":{"line":1,"column":1324}},{"source":"messenger.js","name":"id","original":{"line":75,"column":27},"generated":{"line":1,"column":1328}},{"source":"messenger.js","name":"id","original":{"line":75,"column":27},"generated":{"line":1,"column":1330}},{"source":"messenger.js","name":"id","original":{"line":75,"column":27},"generated":{"line":1,"column":1332}},{"source":"messenger.js","name":"updatedId","original":{"line":75,"column":31},"generated":{"line":1,"column":1335}},{"source":"messenger.js","name":"updatedId","original":{"line":75,"column":31},"generated":{"line":1,"column":1337}},{"source":"messenger.js","name":"updatedId","original":{"line":75,"column":31},"generated":{"line":1,"column":1339}},{"source":"messenger.js","name":"messageBubble","original":{"line":76,"column":8},"generated":{"line":1,"column":1349}},{"source":"messenger.js","name":"document","original":{"line":76,"column":24},"generated":{"line":1,"column":1351}},{"source":"messenger.js","name":"getElementById","original":{"line":76,"column":33},"generated":{"line":1,"column":1360}},{"source":"messenger.js","name":"id","original":{"line":76,"column":48},"generated":{"line":1,"column":1375}},{"source":"messenger.js","name":"messageBubble","original":{"line":77,"column":2},"generated":{"line":1,"column":1378}},{"source":"messenger.js","name":"classList","original":{"line":77,"column":16},"generated":{"line":1,"column":1380}},{"source":"messenger.js","name":"add","original":{"line":77,"column":26},"generated":{"line":1,"column":1390}},{"source":"messenger.js","original":{"line":77,"column":30},"generated":{"line":1,"column":1394}},{"source":"messenger.js","name":"messageBubble","original":{"line":78,"column":2},"generated":{"line":1,"column":1410}},{"source":"messenger.js","name":"id","original":{"line":78,"column":16},"generated":{"line":1,"column":1412}},{"source":"messenger.js","name":"updatedId","original":{"line":78,"column":21},"generated":{"line":1,"column":1415}},{"source":"messenger.js","name":"emitTyping","original":{"line":81,"column":6},"generated":{"line":1,"column":1418}},{"source":"messenger.js","original":{"line":81,"column":19},"generated":{"line":1,"column":1420}},{"source":"messenger.js","name":"socket","original":{"line":82,"column":2},"generated":{"line":1,"column":1431}},{"source":"messenger.js","name":"emit","original":{"line":82,"column":9},"generated":{"line":1,"column":1433}},{"source":"messenger.js","name":"events","original":{"line":82,"column":14},"generated":{"line":1,"column":1438}},{"source":"messenger.js","name":"TYPING","original":{"line":82,"column":21},"generated":{"line":1,"column":1440}},{"source":"messenger.js","name":"TYPING","original":{"line":82,"column":21},"generated":{"line":1,"column":1448}},{"source":"messenger.js","original":{"line":82,"column":29},"generated":{"line":1,"column":1455}},{"source":"messenger.js","name":"userId","original":{"line":82,"column":31},"generated":{"line":1,"column":1456}},{"source":"messenger.js","name":"userId","original":{"line":82,"column":31},"generated":{"line":1,"column":1463}},{"source":"messenger.js","name":"emitNewMessage","original":{"line":85,"column":6},"generated":{"line":1,"column":1468}},{"source":"messenger.js","original":{"line":85,"column":23},"generated":{"line":1,"column":1470}},{"source":"messenger.js","original":{"line":85,"column":52},"generated":{"line":1,"column":1479}},{"source":"messenger.js","name":"message","original":{"line":85,"column":26},"generated":{"line":1,"column":1482}},{"source":"messenger.js","name":"message","original":{"line":85,"column":26},"generated":{"line":1,"column":1486}},{"source":"messenger.js","name":"message","original":{"line":85,"column":26},"generated":{"line":1,"column":1488}},{"source":"messenger.js","name":"message","original":{"line":85,"column":26},"generated":{"line":1,"column":1490}},{"source":"messenger.js","name":"id","original":{"line":85,"column":35},"generated":{"line":1,"column":1498}},{"source":"messenger.js","name":"id","original":{"line":85,"column":35},"generated":{"line":1,"column":1500}},{"source":"messenger.js","name":"id","original":{"line":85,"column":35},"generated":{"line":1,"column":1502}},{"source":"messenger.js","name":"textEl","original":{"line":85,"column":39},"generated":{"line":1,"column":1505}},{"source":"messenger.js","name":"textEl","original":{"line":85,"column":39},"generated":{"line":1,"column":1507}},{"source":"messenger.js","name":"textEl","original":{"line":85,"column":39},"generated":{"line":1,"column":1509}},{"source":"messenger.js","name":"socket","original":{"line":86,"column":2},"generated":{"line":1,"column":1516}},{"source":"messenger.js","name":"emit","original":{"line":86,"column":9},"generated":{"line":1,"column":1518}},{"source":"messenger.js","name":"events","original":{"line":86,"column":14},"generated":{"line":1,"column":1523}},{"source":"messenger.js","name":"NEW_MESSAGE","original":{"line":86,"column":21},"generated":{"line":1,"column":1525}},{"source":"messenger.js","name":"NEW_MESSAGE","original":{"line":86,"column":21},"generated":{"line":1,"column":1533}},{"source":"messenger.js","original":{"line":86,"column":34},"generated":{"line":1,"column":1545}},{"source":"messenger.js","name":"from","original":{"line":87,"column":4},"generated":{"line":1,"column":1546}},{"source":"messenger.js","name":"userId","original":{"line":87,"column":10},"generated":{"line":1,"column":1551}},{"source":"messenger.js","name":"message","original":{"line":88,"column":4},"generated":{"line":1,"column":1553}},{"source":"messenger.js","name":"message","original":{"line":88,"column":4},"generated":{"line":1,"column":1561}},{"source":"messenger.js","name":"id","original":{"line":89,"column":4},"generated":{"line":1,"column":1563}},{"source":"messenger.js","name":"id","original":{"line":89,"column":4},"generated":{"line":1,"column":1566}},{"source":"messenger.js","name":"textEl","original":{"line":91,"column":2},"generated":{"line":1,"column":1570}},{"source":"messenger.js","name":"value","original":{"line":91,"column":9},"generated":{"line":1,"column":1572}},{"source":"messenger.js","original":{"line":91,"column":17},"generated":{"line":1,"column":1578}},{"source":"messenger.js","name":"addToActiveUsers","original":{"line":94,"column":6},"generated":{"line":1,"column":1582}},{"source":"messenger.js","original":{"line":94,"column":25},"generated":{"line":1,"column":1584}},{"source":"messenger.js","original":{"line":94,"column":41},"generated":{"line":1,"column":1593}},{"source":"messenger.js","name":"userId","original":{"line":94,"column":28},"generated":{"line":1,"column":1596}},{"source":"messenger.js","name":"userId","original":{"line":94,"column":28},"generated":{"line":1,"column":1600}},{"source":"messenger.js","name":"userId","original":{"line":94,"column":28},"generated":{"line":1,"column":1602}},{"source":"messenger.js","name":"userId","original":{"line":94,"column":28},"generated":{"line":1,"column":1604}},{"source":"messenger.js","name":"activeUsers","original":{"line":95,"column":6},"generated":{"line":1,"column":1611}},{"source":"messenger.js","name":"activeUsers","original":{"line":95,"column":6},"generated":{"line":1,"column":1615}},{"source":"messenger.js","name":"has","original":{"line":95,"column":18},"generated":{"line":1,"column":1617}},{"source":"messenger.js","name":"userId","original":{"line":95,"column":22},"generated":{"line":1,"column":1621}},{"source":"messenger.js","name":"activeUsers","original":{"line":95,"column":6},"generated":{"line":1,"column":1624}},{"source":"messenger.js","name":"userEl","original":{"line":97,"column":8},"generated":{"line":1,"column":1625}},{"source":"messenger.js","name":"userEl","original":{"line":97,"column":8},"generated":{"line":1,"column":1629}},{"source":"messenger.js","name":"document","original":{"line":97,"column":17},"generated":{"line":1,"column":1631}},{"source":"messenger.js","name":"createElement","original":{"line":97,"column":26},"generated":{"line":1,"column":1640}},{"source":"messenger.js","original":{"line":97,"column":40},"generated":{"line":1,"column":1654}},{"source":"messenger.js","name":"userEl","original":{"line":98,"column":2},"generated":{"line":1,"column":1662}},{"source":"messenger.js","name":"classList","original":{"line":98,"column":9},"generated":{"line":1,"column":1664}},{"source":"messenger.js","name":"add","original":{"line":98,"column":19},"generated":{"line":1,"column":1674}},{"source":"messenger.js","original":{"line":98,"column":23},"generated":{"line":1,"column":1678}},{"source":"messenger.js","original":{"line":98,"column":31},"generated":{"line":1,"column":1685}},{"source":"messenger.js","name":"userEl","original":{"line":99,"column":2},"generated":{"line":1,"column":1702}},{"source":"messenger.js","name":"style","original":{"line":99,"column":9},"generated":{"line":1,"column":1704}},{"source":"messenger.js","name":"backgroundColor","original":{"line":99,"column":15},"generated":{"line":1,"column":1710}},{"source":"messenger.js","original":{"line":99,"column":33},"generated":{"line":1,"column":1727}},{"source":"messenger.js","original":{"line":99,"column":2},"generated":{"line":1,"column":1729}},{"source":"messenger.js","original":{"line":99,"column":2},"generated":{"line":1,"column":1731}},{"source":"messenger.js","name":"activeUsersEl","original":{"line":100,"column":2},"generated":{"line":1,"column":1749}},{"source":"messenger.js","name":"appendChild","original":{"line":100,"column":16},"generated":{"line":1,"column":1751}},{"source":"messenger.js","name":"userEl","original":{"line":100,"column":28},"generated":{"line":1,"column":1763}},{"source":"messenger.js","name":"activeUsers","original":{"line":102,"column":2},"generated":{"line":1,"column":1766}},{"source":"messenger.js","name":"set","original":{"line":102,"column":14},"generated":{"line":1,"column":1768}},{"source":"messenger.js","name":"userId","original":{"line":102,"column":18},"generated":{"line":1,"column":1772}},{"source":"messenger.js","name":"userEl","original":{"line":102,"column":26},"generated":{"line":1,"column":1774}},{"source":"messenger.js","name":"removeFromActiveUsers","original":{"line":105,"column":6},"generated":{"line":1,"column":1779}},{"source":"messenger.js","original":{"line":105,"column":30},"generated":{"line":1,"column":1781}},{"source":"messenger.js","original":{"line":105,"column":46},"generated":{"line":1,"column":1790}},{"source":"messenger.js","name":"userId","original":{"line":105,"column":33},"generated":{"line":1,"column":1793}},{"source":"messenger.js","name":"userId","original":{"line":105,"column":33},"generated":{"line":1,"column":1797}},{"source":"messenger.js","name":"userId","original":{"line":105,"column":33},"generated":{"line":1,"column":1799}},{"source":"messenger.js","name":"userId","original":{"line":105,"column":33},"generated":{"line":1,"column":1801}},{"source":"messenger.js","name":"activeUsers","original":{"line":106,"column":7},"generated":{"line":1,"column":1808}},{"source":"messenger.js","name":"has","original":{"line":106,"column":19},"generated":{"line":1,"column":1810}},{"source":"messenger.js","name":"userId","original":{"line":106,"column":23},"generated":{"line":1,"column":1814}},{"source":"messenger.js","name":"activeUsers","original":{"line":108,"column":2},"generated":{"line":1,"column":1819}},{"source":"messenger.js","name":"get","original":{"line":108,"column":14},"generated":{"line":1,"column":1821}},{"source":"messenger.js","name":"userId","original":{"line":108,"column":18},"generated":{"line":1,"column":1825}},{"source":"messenger.js","name":"remove","original":{"line":108,"column":26},"generated":{"line":1,"column":1828}},{"source":"messenger.js","name":"activeUsers","original":{"line":109,"column":2},"generated":{"line":1,"column":1837}},{"source":"messenger.js","name":"delete","original":{"line":109,"column":14},"generated":{"line":1,"column":1839}},{"source":"messenger.js","name":"userId","original":{"line":109,"column":21},"generated":{"line":1,"column":1846}},{"source":"messenger.js","name":"startTyping","original":{"line":112,"column":6},"generated":{"line":1,"column":1851}},{"source":"messenger.js","original":{"line":112,"column":20},"generated":{"line":1,"column":1853}},{"source":"messenger.js","original":{"line":112,"column":36},"generated":{"line":1,"column":1862}},{"source":"messenger.js","name":"userId","original":{"line":112,"column":23},"generated":{"line":1,"column":1865}},{"source":"messenger.js","name":"userId","original":{"line":112,"column":23},"generated":{"line":1,"column":1869}},{"source":"messenger.js","name":"userId","original":{"line":112,"column":23},"generated":{"line":1,"column":1871}},{"source":"messenger.js","name":"userId","original":{"line":112,"column":23},"generated":{"line":1,"column":1873}},{"source":"messenger.js","name":"activeUsers","original":{"line":113,"column":7},"generated":{"line":1,"column":1880}},{"source":"messenger.js","name":"has","original":{"line":113,"column":19},"generated":{"line":1,"column":1882}},{"source":"messenger.js","name":"userId","original":{"line":113,"column":23},"generated":{"line":1,"column":1886}},{"source":"messenger.js","name":"activeUsers","original":{"line":115,"column":2},"generated":{"line":1,"column":1890}},{"source":"messenger.js","name":"get","original":{"line":115,"column":14},"generated":{"line":1,"column":1892}},{"source":"messenger.js","name":"userId","original":{"line":115,"column":18},"generated":{"line":1,"column":1896}},{"source":"messenger.js","name":"classList","original":{"line":115,"column":26},"generated":{"line":1,"column":1899}},{"source":"messenger.js","name":"add","original":{"line":115,"column":36},"generated":{"line":1,"column":1909}},{"source":"messenger.js","original":{"line":115,"column":40},"generated":{"line":1,"column":1913}},{"source":"messenger.js","name":"stopTyping","original":{"line":118,"column":6},"generated":{"line":1,"column":1924}},{"source":"messenger.js","original":{"line":118,"column":19},"generated":{"line":1,"column":1926}},{"source":"messenger.js","original":{"line":118,"column":35},"generated":{"line":1,"column":1935}},{"source":"messenger.js","name":"userId","original":{"line":118,"column":22},"generated":{"line":1,"column":1938}},{"source":"messenger.js","name":"userId","original":{"line":118,"column":22},"generated":{"line":1,"column":1942}},{"source":"messenger.js","name":"userId","original":{"line":118,"column":22},"generated":{"line":1,"column":1944}},{"source":"messenger.js","name":"userId","original":{"line":118,"column":22},"generated":{"line":1,"column":1946}},{"source":"messenger.js","name":"activeUsers","original":{"line":119,"column":7},"generated":{"line":1,"column":1953}},{"source":"messenger.js","name":"has","original":{"line":119,"column":19},"generated":{"line":1,"column":1955}},{"source":"messenger.js","name":"userId","original":{"line":119,"column":23},"generated":{"line":1,"column":1959}},{"source":"messenger.js","name":"activeUsers","original":{"line":121,"column":2},"generated":{"line":1,"column":1963}},{"source":"messenger.js","name":"get","original":{"line":121,"column":14},"generated":{"line":1,"column":1965}},{"source":"messenger.js","name":"userId","original":{"line":121,"column":18},"generated":{"line":1,"column":1969}},{"source":"messenger.js","name":"classList","original":{"line":121,"column":26},"generated":{"line":1,"column":1972}},{"source":"messenger.js","name":"remove","original":{"line":121,"column":36},"generated":{"line":1,"column":1982}},{"source":"messenger.js","original":{"line":121,"column":43},"generated":{"line":1,"column":1989}},{"source":"messenger.js","name":"emphasizeOwnMessage","original":{"line":124,"column":6},"generated":{"line":1,"column":2000}},{"source":"messenger.js","original":{"line":124,"column":28},"generated":{"line":1,"column":2002}},{"source":"messenger.js","original":{"line":124,"column":48},"generated":{"line":1,"column":2011}},{"source":"messenger.js","name":"target","original":{"line":124,"column":31},"generated":{"line":1,"column":2014}},{"source":"messenger.js","name":"target","original":{"line":124,"column":31},"generated":{"line":1,"column":2018}},{"source":"messenger.js","name":"target","original":{"line":124,"column":31},"generated":{"line":1,"column":2020}},{"source":"messenger.js","name":"target","original":{"line":124,"column":31},"generated":{"line":1,"column":2022}},{"source":"messenger.js","name":"id","original":{"line":124,"column":39},"generated":{"line":1,"column":2029}},{"source":"messenger.js","name":"id","original":{"line":124,"column":39},"generated":{"line":1,"column":2031}},{"source":"messenger.js","name":"id","original":{"line":124,"column":39},"generated":{"line":1,"column":2033}},{"source":"messenger.js","name":"target","original":{"line":125,"column":2},"generated":{"line":1,"column":2036}},{"source":"messenger.js","name":"classList","original":{"line":125,"column":9},"generated":{"line":1,"column":2038}},{"source":"messenger.js","name":"add","original":{"line":125,"column":19},"generated":{"line":1,"column":2048}},{"source":"messenger.js","original":{"line":125,"column":23},"generated":{"line":1,"column":2052}},{"source":"messenger.js","name":"target","original":{"line":126,"column":7},"generated":{"line":1,"column":2061}},{"source":"messenger.js","name":"classList","original":{"line":126,"column":14},"generated":{"line":1,"column":2063}},{"source":"messenger.js","name":"contains","original":{"line":126,"column":24},"generated":{"line":1,"column":2073}},{"source":"messenger.js","original":{"line":126,"column":33},"generated":{"line":1,"column":2082}},{"source":"messenger.js","name":"socket","original":{"line":133,"column":4},"generated":{"line":1,"column":2098}},{"source":"messenger.js","name":"emit","original":{"line":133,"column":11},"generated":{"line":1,"column":2100}},{"source":"messenger.js","name":"events","original":{"line":133,"column":16},"generated":{"line":1,"column":2105}},{"source":"messenger.js","name":"EMPHASIZE_MESSAGE","original":{"line":133,"column":23},"generated":{"line":1,"column":2107}},{"source":"messenger.js","name":"EMPHASIZE_MESSAGE","original":{"line":133,"column":23},"generated":{"line":1,"column":2115}},{"source":"messenger.js","original":{"line":133,"column":42},"generated":{"line":1,"column":2133}},{"source":"messenger.js","name":"id","original":{"line":133,"column":44},"generated":{"line":1,"column":2134}},{"source":"messenger.js","name":"id","original":{"line":133,"column":44},"generated":{"line":1,"column":2137}},{"source":"messenger.js","name":"then","original":{"line":128,"column":7},"generated":{"line":1,"column":2142}},{"source":"messenger.js","name":"then","original":{"line":128,"column":7},"generated":{"line":1,"column":2144}},{"source":"messenger.js","name":"then","original":{"line":128,"column":7},"generated":{"line":1,"column":2146}},{"source":"messenger.js","name":"then","original":{"line":128,"column":7},"generated":{"line":1,"column":2164}},{"source":"messenger.js","name":"delayTiny","original":{"line":128,"column":12},"generated":{"line":1,"column":2169}},{"source":"messenger.js","name":"then","original":{"line":129,"column":7},"generated":{"line":1,"column":2172}},{"source":"messenger.js","original":{"line":129,"column":12},"generated":{"line":1,"column":2177}},{"source":"messenger.js","name":"target","original":{"line":130,"column":8},"generated":{"line":1,"column":2188}},{"source":"messenger.js","name":"classList","original":{"line":130,"column":15},"generated":{"line":1,"column":2190}},{"source":"messenger.js","name":"remove","original":{"line":130,"column":25},"generated":{"line":1,"column":2200}},{"source":"messenger.js","original":{"line":130,"column":32},"generated":{"line":1,"column":2207}},{"source":"messenger.js","name":"emphasizeMessage","original":{"line":137,"column":6},"generated":{"line":1,"column":2219}},{"source":"messenger.js","original":{"line":137,"column":25},"generated":{"line":1,"column":2221}},{"source":"messenger.js","original":{"line":137,"column":37},"generated":{"line":1,"column":2230}},{"source":"messenger.js","name":"id","original":{"line":137,"column":28},"generated":{"line":1,"column":2233}},{"source":"messenger.js","name":"id","original":{"line":137,"column":28},"generated":{"line":1,"column":2237}},{"source":"messenger.js","name":"id","original":{"line":137,"column":28},"generated":{"line":1,"column":2239}},{"source":"messenger.js","name":"id","original":{"line":137,"column":28},"generated":{"line":1,"column":2241}},{"source":"messenger.js","name":"document","original":{"line":138,"column":30},"generated":{"line":1,"column":2244}},{"source":"messenger.js","name":"getElementById","original":{"line":138,"column":39},"generated":{"line":1,"column":2253}},{"source":"messenger.js","name":"id","original":{"line":138,"column":54},"generated":{"line":1,"column":2268}},{"source":"messenger.js","name":"classList","original":{"line":139,"column":22},"generated":{"line":1,"column":2271}},{"source":"messenger.js","name":"add","original":{"line":139,"column":32},"generated":{"line":1,"column":2281}},{"source":"messenger.js","original":{"line":139,"column":36},"generated":{"line":1,"column":2285}},{"source":"messenger.js","name":"document","original":{"line":142,"column":0},"generated":{"line":1,"column":2295}},{"source":"messenger.js","name":"addEventListener","original":{"line":142,"column":9},"generated":{"line":1,"column":2304}},{"source":"messenger.js","original":{"line":142,"column":26},"generated":{"line":1,"column":2321}},{"source":"messenger.js","original":{"line":142,"column":46},"generated":{"line":1,"column":2340}},{"source":"messenger.js","name":"titleEl","original":{"line":143,"column":2},"generated":{"line":1,"column":2351}},{"source":"messenger.js","name":"document","original":{"line":143,"column":12},"generated":{"line":1,"column":2353}},{"source":"messenger.js","name":"getElementById","original":{"line":143,"column":21},"generated":{"line":1,"column":2362}},{"source":"messenger.js","original":{"line":143,"column":36},"generated":{"line":1,"column":2377}},{"source":"messenger.js","name":"sendButtonEl","original":{"line":144,"column":2},"generated":{"line":1,"column":2386}},{"source":"messenger.js","name":"document","original":{"line":144,"column":17},"generated":{"line":1,"column":2388}},{"source":"messenger.js","name":"getElementById","original":{"line":144,"column":26},"generated":{"line":1,"column":2397}},{"source":"messenger.js","original":{"line":144,"column":41},"generated":{"line":1,"column":2412}},{"source":"messenger.js","name":"activeUsersEl","original":{"line":145,"column":2},"generated":{"line":1,"column":2420}},{"source":"messenger.js","name":"document","original":{"line":145,"column":18},"generated":{"line":1,"column":2422}},{"source":"messenger.js","name":"getElementById","original":{"line":145,"column":27},"generated":{"line":1,"column":2431}},{"source":"messenger.js","original":{"line":145,"column":42},"generated":{"line":1,"column":2446}},{"source":"messenger.js","name":"messagesEl","original":{"line":146,"column":2},"generated":{"line":1,"column":2461}},{"source":"messenger.js","name":"document","original":{"line":146,"column":15},"generated":{"line":1,"column":2463}},{"source":"messenger.js","name":"getElementById","original":{"line":146,"column":24},"generated":{"line":1,"column":2472}},{"source":"messenger.js","original":{"line":146,"column":39},"generated":{"line":1,"column":2487}},{"source":"messenger.js","name":"textInputEl","original":{"line":147,"column":2},"generated":{"line":1,"column":2499}},{"source":"messenger.js","name":"document","original":{"line":147,"column":16},"generated":{"line":1,"column":2501}},{"source":"messenger.js","name":"getElementById","original":{"line":147,"column":25},"generated":{"line":1,"column":2510}},{"source":"messenger.js","original":{"line":147,"column":40},"generated":{"line":1,"column":2525}},{"source":"messenger.js","name":"$textInput","original":{"line":149,"column":8},"generated":{"line":1,"column":2538}},{"source":"messenger.js","name":"$textInput","original":{"line":149,"column":8},"generated":{"line":1,"column":2542}},{"source":"messenger.js","name":"Stream","original":{"line":149,"column":21},"generated":{"line":1,"column":2544}},{"source":"messenger.js","name":"fromEvent","original":{"line":149,"column":28},"generated":{"line":1,"column":2546}},{"source":"messenger.js","name":"fromEvent","original":{"line":149,"column":28},"generated":{"line":1,"column":2554}},{"source":"messenger.js","original":{"line":149,"column":38},"generated":{"line":1,"column":2564}},{"source":"messenger.js","name":"textInputEl","original":{"line":149,"column":49},"generated":{"line":1,"column":2574}},{"source":"messenger.js","name":"$sendButtonClick","original":{"line":150,"column":8},"generated":{"line":1,"column":2577}},{"source":"messenger.js","name":"Stream","original":{"line":150,"column":27},"generated":{"line":1,"column":2579}},{"source":"messenger.js","name":"fromEvent","original":{"line":150,"column":34},"generated":{"line":1,"column":2581}},{"source":"messenger.js","name":"fromEvent","original":{"line":150,"column":34},"generated":{"line":1,"column":2589}},{"source":"messenger.js","original":{"line":150,"column":44},"generated":{"line":1,"column":2599}},{"source":"messenger.js","name":"sendButtonEl","original":{"line":150,"column":53},"generated":{"line":1,"column":2607}},{"source":"messenger.js","name":"$messageClick","original":{"line":151,"column":8},"generated":{"line":1,"column":2610}},{"source":"messenger.js","name":"Stream","original":{"line":151,"column":24},"generated":{"line":1,"column":2612}},{"source":"messenger.js","name":"fromEvent","original":{"line":151,"column":31},"generated":{"line":1,"column":2614}},{"source":"messenger.js","name":"fromEvent","original":{"line":151,"column":31},"generated":{"line":1,"column":2622}},{"source":"messenger.js","original":{"line":151,"column":41},"generated":{"line":1,"column":2632}},{"source":"messenger.js","name":"messagesEl","original":{"line":151,"column":50},"generated":{"line":1,"column":2640}},{"source":"messenger.js","name":"then","original":{"line":154,"column":5},"generated":{"line":1,"column":2644}},{"source":"messenger.js","name":"then","original":{"line":154,"column":5},"generated":{"line":1,"column":2646}},{"source":"messenger.js","name":"then","original":{"line":154,"column":5},"generated":{"line":1,"column":2648}},{"source":"messenger.js","name":"then","original":{"line":154,"column":5},"generated":{"line":1,"column":2666}},{"source":"messenger.js","original":{"line":154,"column":10},"generated":{"line":1,"column":2671}},{"source":"messenger.js","name":"titleEl","original":{"line":154,"column":16},"generated":{"line":1,"column":2682}},{"source":"messenger.js","name":"titleEl","original":{"line":154,"column":16},"generated":{"line":1,"column":2689}},{"source":"messenger.js","name":"classList","original":{"line":154,"column":24},"generated":{"line":1,"column":2691}},{"source":"messenger.js","name":"add","original":{"line":154,"column":34},"generated":{"line":1,"column":2701}},{"source":"messenger.js","original":{"line":154,"column":38},"generated":{"line":1,"column":2705}},{"source":"messenger.js","name":"then","original":{"line":155,"column":5},"generated":{"line":1,"column":2717}},{"source":"messenger.js","name":"delayShort","original":{"line":155,"column":10},"generated":{"line":1,"column":2722}},{"source":"messenger.js","name":"then","original":{"line":156,"column":5},"generated":{"line":1,"column":2725}},{"source":"messenger.js","original":{"line":156,"column":10},"generated":{"line":1,"column":2730}},{"source":"messenger.js","name":"titleEl","original":{"line":156,"column":17},"generated":{"line":1,"column":2741}},{"source":"messenger.js","name":"titleEl","original":{"line":156,"column":17},"generated":{"line":1,"column":2748}},{"source":"messenger.js","name":"style","original":{"line":156,"column":25},"generated":{"line":1,"column":2750}},{"source":"messenger.js","name":"display","original":{"line":156,"column":31},"generated":{"line":1,"column":2756}},{"source":"messenger.js","original":{"line":156,"column":41},"generated":{"line":1,"column":2764}},{"source":"messenger.js","name":"textInputEl","original":{"line":158,"column":2},"generated":{"line":1,"column":2773}},{"source":"messenger.js","name":"focus","original":{"line":158,"column":14},"generated":{"line":1,"column":2775}},{"source":"messenger.js","name":"textInputEl","original":{"line":159,"column":2},"generated":{"line":1,"column":2783}},{"source":"messenger.js","name":"select","original":{"line":159,"column":14},"generated":{"line":1,"column":2785}},{"source":"messenger.js","name":"$connections","original":{"line":161,"column":2},"generated":{"line":1,"column":2794}},{"source":"messenger.js","name":"subscribe","original":{"line":161,"column":15},"generated":{"line":1,"column":2796}},{"source":"messenger.js","original":{"line":161,"column":25},"generated":{"line":1,"column":2806}},{"source":"messenger.js","name":"next","original":{"line":162,"column":4},"generated":{"line":1,"column":2807}},{"source":"messenger.js","name":"addToActiveUsers","original":{"line":162,"column":10},"generated":{"line":1,"column":2812}},{"source":"messenger.js","name":"complete","original":{"line":163,"column":4},"generated":{"line":1,"column":2814}},{"source":"messenger.js","name":"removeFromActiveUsers","original":{"line":163,"column":14},"generated":{"line":1,"column":2823}},{"source":"messenger.js","name":"$textInput","original":{"line":166,"column":2},"generated":{"line":1,"column":2827}},{"source":"messenger.js","name":"filter","original":{"line":167,"column":5},"generated":{"line":1,"column":2829}},{"source":"messenger.js","original":{"line":167,"column":12},"generated":{"line":1,"column":2836}},{"source":"messenger.js","name":"e","original":{"line":167,"column":13},"generated":{"line":1,"column":2845}},{"source":"messenger.js","name":"keyIsEnter","original":{"line":167,"column":19},"generated":{"line":1,"column":2848}},{"source":"messenger.js","name":"keyIsEnter","original":{"line":167,"column":19},"generated":{"line":1,"column":2855}},{"source":"messenger.js","name":"e","original":{"line":167,"column":30},"generated":{"line":1,"column":2857}},{"source":"messenger.js","name":"keyCode","original":{"line":167,"column":32},"generated":{"line":1,"column":2859}},{"source":"messenger.js","name":"map","original":{"line":168,"column":5},"generated":{"line":1,"column":2870}},{"source":"messenger.js","original":{"line":168,"column":9},"generated":{"line":1,"column":2874}},{"source":"messenger.js","name":"e","original":{"line":168,"column":10},"generated":{"line":1,"column":2883}},{"source":"messenger.js","original":{"line":168,"column":17},"generated":{"line":1,"column":2886}},{"source":"messenger.js","original":{"line":168,"column":17},"generated":{"line":1,"column":2892}},{"source":"messenger.js","name":"message","original":{"line":168,"column":19},"generated":{"line":1,"column":2893}},{"source":"messenger.js","name":"e","original":{"line":168,"column":28},"generated":{"line":1,"column":2901}},{"source":"messenger.js","name":"target","original":{"line":168,"column":30},"generated":{"line":1,"column":2903}},{"source":"messenger.js","name":"value","original":{"line":168,"column":37},"generated":{"line":1,"column":2910}},{"source":"messenger.js","name":"trim","original":{"line":168,"column":43},"generated":{"line":1,"column":2916}},{"source":"messenger.js","name":"e","original":{"line":168,"column":51},"generated":{"line":1,"column":2923}},{"source":"messenger.js","name":"e","original":{"line":168,"column":51},"generated":{"line":1,"column":2925}},{"source":"messenger.js","name":"textEl","original":{"line":168,"column":54},"generated":{"line":1,"column":2927}},{"source":"messenger.js","name":"e","original":{"line":168,"column":62},"generated":{"line":1,"column":2934}},{"source":"messenger.js","name":"target","original":{"line":168,"column":64},"generated":{"line":1,"column":2936}},{"source":"messenger.js","name":"id","original":{"line":168,"column":72},"generated":{"line":1,"column":2943}},{"source":"messenger.js","original":{"line":168,"column":76},"generated":{"line":1,"column":2947}},{"source":"messenger.js","original":{"line":168,"column":76},"generated":{"line":1,"column":2949}},{"source":"messenger.js","original":{"line":168,"column":76},"generated":{"line":1,"column":2951}},{"source":"messenger.js","name":"subscribe","original":{"line":169,"column":5},"generated":{"line":1,"column":2965}},{"source":"messenger.js","original":{"line":169,"column":15},"generated":{"line":1,"column":2975}},{"source":"messenger.js","name":"next","original":{"line":170,"column":6},"generated":{"line":1,"column":2976}},{"source":"messenger.js","original":{"line":170,"column":12},"generated":{"line":1,"column":2981}},{"source":"messenger.js","original":{"line":170,"column":44},"generated":{"line":1,"column":2990}},{"source":"messenger.js","name":"message","original":{"line":170,"column":15},"generated":{"line":1,"column":2993}},{"source":"messenger.js","name":"message","original":{"line":170,"column":15},"generated":{"line":1,"column":2997}},{"source":"messenger.js","name":"message","original":{"line":170,"column":15},"generated":{"line":1,"column":2999}},{"source":"messenger.js","name":"message","original":{"line":170,"column":15},"generated":{"line":1,"column":3001}},{"source":"messenger.js","name":"id","original":{"line":170,"column":24},"generated":{"line":1,"column":3009}},{"source":"messenger.js","name":"id","original":{"line":170,"column":24},"generated":{"line":1,"column":3011}},{"source":"messenger.js","name":"id","original":{"line":170,"column":24},"generated":{"line":1,"column":3013}},{"source":"messenger.js","name":"textEl","original":{"line":170,"column":28},"generated":{"line":1,"column":3016}},{"source":"messenger.js","name":"textEl","original":{"line":170,"column":28},"generated":{"line":1,"column":3018}},{"source":"messenger.js","name":"textEl","original":{"line":170,"column":28},"generated":{"line":1,"column":3020}},{"source":"messenger.js","name":"e","original":{"line":170,"column":36},"generated":{"line":1,"column":3027}},{"source":"messenger.js","name":"e","original":{"line":170,"column":36},"generated":{"line":1,"column":3029}},{"source":"messenger.js","name":"preventDefault","original":{"line":171,"column":10},"generated":{"line":1,"column":3031}},{"source":"messenger.js","name":"emitNewMessage","original":{"line":172,"column":8},"generated":{"line":1,"column":3048}},{"source":"messenger.js","original":{"line":172,"column":23},"generated":{"line":1,"column":3050}},{"source":"messenger.js","name":"message","original":{"line":172,"column":25},"generated":{"line":1,"column":3051}},{"source":"messenger.js","name":"message","original":{"line":172,"column":25},"generated":{"line":1,"column":3059}},{"source":"messenger.js","name":"textEl","original":{"line":172,"column":34},"generated":{"line":1,"column":3061}},{"source":"messenger.js","name":"textEl","original":{"line":172,"column":34},"generated":{"line":1,"column":3068}},{"source":"messenger.js","name":"id","original":{"line":172,"column":42},"generated":{"line":1,"column":3070}},{"source":"messenger.js","name":"id","original":{"line":172,"column":42},"generated":{"line":1,"column":3073}},{"source":"messenger.js","name":"addMessageToChat","original":{"line":173,"column":8},"generated":{"line":1,"column":3077}},{"source":"messenger.js","original":{"line":173,"column":25},"generated":{"line":1,"column":3079}},{"source":"messenger.js","name":"message","original":{"line":173,"column":27},"generated":{"line":1,"column":3080}},{"source":"messenger.js","name":"message","original":{"line":173,"column":27},"generated":{"line":1,"column":3088}},{"source":"messenger.js","name":"id","original":{"line":173,"column":36},"generated":{"line":1,"column":3090}},{"source":"messenger.js","name":"id","original":{"line":173,"column":36},"generated":{"line":1,"column":3093}},{"source":"messenger.js","original":{"line":173,"column":42},"generated":{"line":1,"column":3097}},{"source":"messenger.js","name":"$textInput","original":{"line":177,"column":2},"generated":{"line":1,"column":3103}},{"source":"messenger.js","name":"filter","original":{"line":178,"column":5},"generated":{"line":1,"column":3105}},{"source":"messenger.js","original":{"line":178,"column":12},"generated":{"line":1,"column":3112}},{"source":"messenger.js","name":"e","original":{"line":178,"column":13},"generated":{"line":1,"column":3121}},{"source":"messenger.js","original":{"line":178,"column":19},"generated":{"line":1,"column":3124}},{"source":"messenger.js","name":"keyIsEnter","original":{"line":178,"column":20},"generated":{"line":1,"column":3131}},{"source":"messenger.js","name":"e","original":{"line":178,"column":31},"generated":{"line":1,"column":3133}},{"source":"messenger.js","name":"keyCode","original":{"line":178,"column":33},"generated":{"line":1,"column":3135}},{"source":"messenger.js","name":"subscribe","original":{"line":179,"column":5},"generated":{"line":1,"column":3146}},{"source":"messenger.js","original":{"line":179,"column":15},"generated":{"line":1,"column":3156}},{"source":"messenger.js","name":"next","original":{"line":180,"column":6},"generated":{"line":1,"column":3157}},{"source":"messenger.js","name":"emitTyping","original":{"line":180,"column":12},"generated":{"line":1,"column":3162}},{"source":"messenger.js","name":"complete","original":{"line":181,"column":6},"generated":{"line":1,"column":3164}},{"source":"messenger.js","original":{"line":181,"column":16},"generated":{"line":1,"column":3173}},{"source":"messenger.js","name":"$sendButtonClick","original":{"line":184,"column":2},"generated":{"line":1,"column":3188}},{"source":"messenger.js","name":"map","original":{"line":185,"column":5},"generated":{"line":1,"column":3190}},{"source":"messenger.js","original":{"line":185,"column":9},"generated":{"line":1,"column":3194}},{"source":"messenger.js","original":{"line":185,"column":16},"generated":{"line":1,"column":3205}},{"source":"messenger.js","original":{"line":185,"column":16},"generated":{"line":1,"column":3211}},{"source":"messenger.js","name":"message","original":{"line":185,"column":18},"generated":{"line":1,"column":3212}},{"source":"messenger.js","name":"textInputEl","original":{"line":185,"column":27},"generated":{"line":1,"column":3220}},{"source":"messenger.js","name":"value","original":{"line":185,"column":39},"generated":{"line":1,"column":3222}},{"source":"messenger.js","name":"trim","original":{"line":185,"column":45},"generated":{"line":1,"column":3228}},{"source":"messenger.js","name":"textEl","original":{"line":185,"column":53},"generated":{"line":1,"column":3235}},{"source":"messenger.js","name":"textInputEl","original":{"line":185,"column":61},"generated":{"line":1,"column":3242}},{"source":"messenger.js","name":"subscribe","original":{"line":186,"column":5},"generated":{"line":1,"column":3247}},{"source":"messenger.js","original":{"line":186,"column":15},"generated":{"line":1,"column":3257}},{"source":"messenger.js","name":"next","original":{"line":187,"column":6},"generated":{"line":1,"column":3258}},{"source":"messenger.js","original":{"line":187,"column":12},"generated":{"line":1,"column":3263}},{"source":"messenger.js","original":{"line":187,"column":37},"generated":{"line":1,"column":3272}},{"source":"messenger.js","name":"message","original":{"line":187,"column":15},"generated":{"line":1,"column":3275}},{"source":"messenger.js","name":"message","original":{"line":187,"column":15},"generated":{"line":1,"column":3279}},{"source":"messenger.js","name":"message","original":{"line":187,"column":15},"generated":{"line":1,"column":3281}},{"source":"messenger.js","name":"message","original":{"line":187,"column":15},"generated":{"line":1,"column":3283}},{"source":"messenger.js","name":"textEl","original":{"line":187,"column":24},"generated":{"line":1,"column":3291}},{"source":"messenger.js","name":"textEl","original":{"line":187,"column":24},"generated":{"line":1,"column":3293}},{"source":"messenger.js","name":"textEl","original":{"line":187,"column":24},"generated":{"line":1,"column":3295}},{"source":"messenger.js","name":"id","original":{"line":188,"column":14},"generated":{"line":1,"column":3302}},{"source":"messenger.js","original":{"line":188,"column":19},"generated":{"line":1,"column":3305}},{"source":"messenger.js","original":{"line":188,"column":8},"generated":{"line":1,"column":3307}},{"source":"messenger.js","original":{"line":188,"column":8},"generated":{"line":1,"column":3309}},{"source":"messenger.js","name":"emitNewMessage","original":{"line":189,"column":8},"generated":{"line":1,"column":3320}},{"source":"messenger.js","original":{"line":189,"column":23},"generated":{"line":1,"column":3322}},{"source":"messenger.js","name":"message","original":{"line":189,"column":25},"generated":{"line":1,"column":3323}},{"source":"messenger.js","name":"message","original":{"line":189,"column":25},"generated":{"line":1,"column":3331}},{"source":"messenger.js","name":"id","original":{"line":189,"column":34},"generated":{"line":1,"column":3333}},{"source":"messenger.js","name":"id","original":{"line":189,"column":34},"generated":{"line":1,"column":3336}},{"source":"messenger.js","name":"textEl","original":{"line":189,"column":38},"generated":{"line":1,"column":3338}},{"source":"messenger.js","name":"textEl","original":{"line":189,"column":38},"generated":{"line":1,"column":3345}},{"source":"messenger.js","name":"addMessageToChat","original":{"line":190,"column":8},"generated":{"line":1,"column":3349}},{"source":"messenger.js","original":{"line":190,"column":25},"generated":{"line":1,"column":3351}},{"source":"messenger.js","name":"message","original":{"line":190,"column":27},"generated":{"line":1,"column":3352}},{"source":"messenger.js","name":"message","original":{"line":190,"column":27},"generated":{"line":1,"column":3360}},{"source":"messenger.js","name":"id","original":{"line":190,"column":36},"generated":{"line":1,"column":3362}},{"source":"messenger.js","name":"id","original":{"line":190,"column":36},"generated":{"line":1,"column":3365}},{"source":"messenger.js","original":{"line":190,"column":42},"generated":{"line":1,"column":3369}},{"source":"messenger.js","name":"complete","original":{"line":192,"column":6},"generated":{"line":1,"column":3373}},{"source":"messenger.js","original":{"line":192,"column":16},"generated":{"line":1,"column":3382}},{"source":"messenger.js","name":"$messages","original":{"line":195,"column":2},"generated":{"line":1,"column":3397}},{"source":"messenger.js","name":"filter","original":{"line":196,"column":5},"generated":{"line":1,"column":3399}},{"source":"messenger.js","original":{"line":196,"column":12},"generated":{"line":1,"column":3406}},{"source":"messenger.js","original":{"line":196,"column":12},"generated":{"line":1,"column":3415}},{"source":"messenger.js","name":"from","original":{"line":196,"column":26},"generated":{"line":1,"column":3418}},{"source":"messenger.js","name":"from","original":{"line":196,"column":15},"generated":{"line":1,"column":3425}},{"source":"messenger.js","name":"from","original":{"line":196,"column":15},"generated":{"line":1,"column":3427}},{"source":"messenger.js","name":"userId","original":{"line":196,"column":35},"generated":{"line":1,"column":3434}},{"source":"messenger.js","name":"subscribe","original":{"line":197,"column":5},"generated":{"line":1,"column":3438}},{"source":"messenger.js","original":{"line":197,"column":15},"generated":{"line":1,"column":3448}},{"source":"messenger.js","name":"next","original":{"line":198,"column":6},"generated":{"line":1,"column":3449}},{"source":"messenger.js","name":"addMessageToChat","original":{"line":198,"column":12},"generated":{"line":1,"column":3454}},{"source":"messenger.js","name":"complete","original":{"line":199,"column":6},"generated":{"line":1,"column":3456}},{"source":"messenger.js","original":{"line":199,"column":16},"generated":{"line":1,"column":3465}},{"source":"messenger.js","name":"$messageId","original":{"line":202,"column":2},"generated":{"line":1,"column":3480}},{"source":"messenger.js","name":"subscribe","original":{"line":202,"column":13},"generated":{"line":1,"column":3482}},{"source":"messenger.js","original":{"line":202,"column":23},"generated":{"line":1,"column":3492}},{"source":"messenger.js","name":"next","original":{"line":202,"column":25},"generated":{"line":1,"column":3493}},{"source":"messenger.js","name":"updateMessageId","original":{"line":202,"column":31},"generated":{"line":1,"column":3498}},{"source":"messenger.js","name":"$messageClick","original":{"line":204,"column":2},"generated":{"line":1,"column":3502}},{"source":"messenger.js","name":"filter","original":{"line":205,"column":5},"generated":{"line":1,"column":3504}},{"source":"messenger.js","original":{"line":206,"column":6},"generated":{"line":1,"column":3511}},{"source":"messenger.js","name":"e","original":{"line":206,"column":7},"generated":{"line":1,"column":3520}},{"source":"messenger.js","name":"e","original":{"line":207,"column":8},"generated":{"line":1,"column":3523}},{"source":"messenger.js","name":"e","original":{"line":207,"column":8},"generated":{"line":1,"column":3530}},{"source":"messenger.js","name":"target","original":{"line":207,"column":10},"generated":{"line":1,"column":3532}},{"source":"messenger.js","name":"e","original":{"line":208,"column":8},"generated":{"line":1,"column":3540}},{"source":"messenger.js","name":"target","original":{"line":208,"column":10},"generated":{"line":1,"column":3542}},{"source":"messenger.js","name":"classList","original":{"line":208,"column":17},"generated":{"line":1,"column":3549}},{"source":"messenger.js","name":"contains","original":{"line":208,"column":27},"generated":{"line":1,"column":3559}},{"source":"messenger.js","original":{"line":208,"column":36},"generated":{"line":1,"column":3568}},{"source":"messenger.js","name":"e","original":{"line":209,"column":8},"generated":{"line":1,"column":3582}},{"source":"messenger.js","name":"target","original":{"line":209,"column":10},"generated":{"line":1,"column":3584}},{"source":"messenger.js","name":"classList","original":{"line":209,"column":17},"generated":{"line":1,"column":3591}},{"source":"messenger.js","name":"contains","original":{"line":209,"column":27},"generated":{"line":1,"column":3601}},{"source":"messenger.js","original":{"line":209,"column":36},"generated":{"line":1,"column":3610}},{"source":"messenger.js","name":"filter","original":{"line":211,"column":5},"generated":{"line":1,"column":3626}},{"source":"messenger.js","original":{"line":211,"column":12},"generated":{"line":1,"column":3634}},{"source":"messenger.js","original":{"line":211,"column":28},"generated":{"line":1,"column":3636}},{"source":"messenger.js","original":{"line":211,"column":28},"generated":{"line":1,"column":3638}},{"source":"messenger.js","original":{"line":211,"column":28},"generated":{"line":1,"column":3655}},{"source":"messenger.js","name":"map","original":{"line":212,"column":5},"generated":{"line":1,"column":3659}},{"source":"messenger.js","original":{"line":212,"column":9},"generated":{"line":1,"column":3663}},{"source":"messenger.js","name":"e","original":{"line":212,"column":10},"generated":{"line":1,"column":3672}},{"source":"messenger.js","original":{"line":212,"column":17},"generated":{"line":1,"column":3675}},{"source":"messenger.js","original":{"line":212,"column":17},"generated":{"line":1,"column":3681}},{"source":"messenger.js","name":"target","original":{"line":212,"column":19},"generated":{"line":1,"column":3682}},{"source":"messenger.js","name":"e","original":{"line":212,"column":27},"generated":{"line":1,"column":3689}},{"source":"messenger.js","name":"target","original":{"line":212,"column":29},"generated":{"line":1,"column":3691}},{"source":"messenger.js","name":"id","original":{"line":212,"column":37},"generated":{"line":1,"column":3698}},{"source":"messenger.js","name":"e","original":{"line":212,"column":41},"generated":{"line":1,"column":3701}},{"source":"messenger.js","name":"target","original":{"line":212,"column":43},"generated":{"line":1,"column":3703}},{"source":"messenger.js","name":"id","original":{"line":212,"column":50},"generated":{"line":1,"column":3710}},{"source":"messenger.js","name":"subscribe","original":{"line":213,"column":5},"generated":{"line":1,"column":3716}},{"source":"messenger.js","original":{"line":213,"column":15},"generated":{"line":1,"column":3726}},{"source":"messenger.js","name":"next","original":{"line":214,"column":6},"generated":{"line":1,"column":3727}},{"source":"messenger.js","name":"emphasizeOwnMessage","original":{"line":214,"column":12},"generated":{"line":1,"column":3732}},{"source":"messenger.js","name":"complete","original":{"line":215,"column":6},"generated":{"line":1,"column":3734}},{"source":"messenger.js","original":{"line":215,"column":16},"generated":{"line":1,"column":3743}},{"source":"messenger.js","name":"$emphasizeMessage","original":{"line":218,"column":2},"generated":{"line":1,"column":3758}},{"source":"messenger.js","name":"subscribe","original":{"line":218,"column":20},"generated":{"line":1,"column":3760}},{"source":"messenger.js","original":{"line":218,"column":30},"generated":{"line":1,"column":3770}},{"source":"messenger.js","name":"next","original":{"line":219,"column":4},"generated":{"line":1,"column":3771}},{"source":"messenger.js","original":{"line":219,"column":10},"generated":{"line":1,"column":3776}},{"source":"messenger.js","original":{"line":219,"column":22},"generated":{"line":1,"column":3785}},{"source":"messenger.js","name":"id","original":{"line":219,"column":13},"generated":{"line":1,"column":3788}},{"source":"messenger.js","name":"id","original":{"line":219,"column":13},"generated":{"line":1,"column":3792}},{"source":"messenger.js","name":"id","original":{"line":219,"column":13},"generated":{"line":1,"column":3794}},{"source":"messenger.js","name":"id","original":{"line":219,"column":13},"generated":{"line":1,"column":3796}},{"source":"messenger.js","name":"emphasizeMessage","original":{"line":220,"column":6},"generated":{"line":1,"column":3799}},{"source":"messenger.js","original":{"line":220,"column":23},"generated":{"line":1,"column":3801}},{"source":"messenger.js","name":"id","original":{"line":220,"column":25},"generated":{"line":1,"column":3802}},{"source":"messenger.js","name":"id","original":{"line":220,"column":25},"generated":{"line":1,"column":3805}},{"source":"messenger.js","name":"$userTyping","original":{"line":224,"column":2},"generated":{"line":1,"column":3812}},{"source":"messenger.js","name":"subscribe","original":{"line":224,"column":14},"generated":{"line":1,"column":3814}},{"source":"messenger.js","original":{"line":224,"column":24},"generated":{"line":1,"column":3824}},{"source":"messenger.js","name":"next","original":{"line":225,"column":4},"generated":{"line":1,"column":3825}},{"source":"messenger.js","name":"startTyping","original":{"line":225,"column":10},"generated":{"line":1,"column":3830}},{"source":"messenger.js","name":"complete","original":{"line":226,"column":4},"generated":{"line":1,"column":3832}},{"source":"messenger.js","name":"stopTyping","original":{"line":226,"column":14},"generated":{"line":1,"column":3841}}],"sources":{"messenger.js":"'use strict'\n\nimport uuid from 'uuid/v1'\nimport Stream from 'observable-stream'\nimport { delay, keyIs, getRandomColor, promisifiedRAF, takeContinuousN } from './utils'\nimport events from '../events'\n\nconst port = window.location.port ? ':' + window.location.port : ''\nconst host = `${window.location.hostname}${port}`\nconst socket = io.connect(host)\nlet messagesEl = null\nlet textInputEl = null\nlet sendButtonEl = null\nlet userId = null\nlet titleEl = null\nlet activeUsersEl = null\nconst activeUsers = new Map()\n\nconst keyIsEnter = keyIs('enter')\n\nconst delayShort = delay(1000)\nconst delayTiny = delay(250)\n\nsocket.on(events.INFO, ({ id, connectedUsers }) => {\n  userId = id\n  connectedUsers\n    .filter((user) => user !== userId)\n    .forEach((user) => {\n      addToActiveUsers({ userId: user })\n    })\n})\n\nconst $connections = new Stream((observer) => {\n  socket.on(events.USER_CONNECTED, observer.next)\n  socket.on(events.USER_DISCONNETED, observer.complete)\n})\n\nconst $messages = new Stream((observer) => {\n  socket.on(events.NEW_MESSAGE, observer.next)\n  socket.on(events.DISCONNECT, observer.complete)\n})\n\nconst $userTyping = new Stream((observer) => {\n  socket.on(events.TYPING, observer.next)\n  socket.on(events.STOPPED_TYPING, observer.complete)\n})\n\nconst $messageId = new Stream((observer) => {\n  socket.on(events.MESSAGE_ID, observer.next)\n})\n\nconst $emphasizeMessage = new Stream((observer) => {\n  socket.on(events.EMPHASIZE_MESSAGE, observer.next)\n})\n\n/**\n * Adds the message to the chat, and scrolls it into view.\n * Just DOM operations.\n * @param {object} { message, id }\n * @param {boolean} isOwn\n */\nconst addMessageToChat = ({ message, id }, isOwn) => {\n  if (!message) return\n\n  const mEl = document.createElement('div')\n  mEl.textContent = message\n  messagesEl.appendChild(mEl)\n  mEl.classList.add('j-message')\n  mEl.id = id\n  isOwn ? mEl.classList.add('owner-self') : mEl.classList.add('owner-other')\n  promisifiedRAF().then(() => mEl.classList.add('visible'))\n  mEl.scrollIntoView()\n}\n\nconst updateMessageId = ({ id, updatedId }) => {\n  const messageBubble = document.getElementById(id)\n  messageBubble.classList.add('j-updated-id')\n  messageBubble.id = updatedId\n}\n\nconst emitTyping = () => {\n  socket.emit(events.TYPING, { userId })\n}\n\nconst emitNewMessage = ({ message, id, textEl }) => {\n  socket.emit(events.NEW_MESSAGE, {\n    from: userId,\n    message,\n    id,\n  })\n  textEl.value = ''\n}\n\nconst addToActiveUsers = ({ userId }) => {\n  if (activeUsers.has(userId)) return\n\n  const userEl = document.createElement('span')\n  userEl.classList.add('user', 'u-float-right')\n  userEl.style.backgroundColor = getRandomColor()\n  activeUsersEl.appendChild(userEl)\n\n  activeUsers.set(userId, userEl)\n}\n\nconst removeFromActiveUsers = ({ userId }) => {\n  if (!activeUsers.has(userId)) return\n\n  activeUsers.get(userId).remove()\n  activeUsers.delete(userId)\n}\n\nconst startTyping = ({ userId }) => {\n  if (!activeUsers.has(userId)) return\n\n  activeUsers.get(userId).classList.add('typing')\n}\n\nconst stopTyping = ({ userId }) => {\n  if (!activeUsers.has(userId)) return\n\n  activeUsers.get(userId).classList.remove('typing')\n}\n\nconst emphasizeOwnMessage = ({ target, id }) => {\n  target.classList.add('large')\n  if (!target.classList.contains('j-updated-id')) {\n    promisifiedRAF()\n      .then(delayTiny)\n      .then(() => {\n        target.classList.remove('large')\n      })\n  } else {\n    socket.emit(events.EMPHASIZE_MESSAGE, { id })\n  }\n}\n\nconst emphasizeMessage = ({ id }) => {\n  const targetMessageBubble = document.getElementById(id)\n  targetMessageBubble.classList.add('large')\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  titleEl = document.getElementById('title')\n  sendButtonEl = document.getElementById('send')\n  activeUsersEl = document.getElementById('activeUsers')\n  messagesEl = document.getElementById('messages')\n  textInputEl = document.getElementById('textInput')\n\n  const $textInput = Stream.fromEvent('keydown', textInputEl)\n  const $sendButtonClick = Stream.fromEvent('click', sendButtonEl)\n  const $messageClick = Stream.fromEvent('click', messagesEl)\n\n  promisifiedRAF()\n    .then(() => titleEl.classList.add('u-fade'))\n    .then(delayShort)\n    .then(() => (titleEl.style.display = 'none'))\n\n  textInputEl.focus()\n  textInputEl.select()\n\n  $connections.subscribe({\n    next: addToActiveUsers,\n    complete: removeFromActiveUsers,\n  })\n\n  $textInput\n    .filter((e) => keyIsEnter(e.keyCode))\n    .map((e) => ({ message: e.target.value.trim(), e, textEl: e.target, id: uuid() }))\n    .subscribe({\n      next: ({ message, id, textEl, e }) => {\n        e.preventDefault()\n        emitNewMessage({ message, textEl, id })\n        addMessageToChat({ message, id }, true)\n      },\n    })\n\n  $textInput\n    .filter((e) => !keyIsEnter(e.keyCode))\n    .subscribe({\n      next: emitTyping,\n      complete: () => {},\n    })\n\n  $sendButtonClick\n    .map(() => ({ message: textInputEl.value.trim(), textEl: textInputEl }))\n    .subscribe({\n      next: ({ message, textEl }) => {\n        const id = uuid()\n        emitNewMessage({ message, id, textEl })\n        addMessageToChat({ message, id }, true)\n      },\n      complete: () => {},\n    })\n\n  $messages\n    .filter(({ from }) => from !== userId)\n    .subscribe({\n      next: addMessageToChat,\n      complete: () => {},\n    })\n\n  $messageId.subscribe({ next: updateMessageId })\n\n  $messageClick\n    .filter(\n      (e) =>\n        e.target &&\n        e.target.classList.contains('j-message') &&\n        e.target.classList.contains('owner-self')\n    )\n    .filter(takeContinuousN(5))\n    .map((e) => ({ target: e.target, id: e.target.id }))\n    .subscribe({\n      next: emphasizeOwnMessage,\n      complete: () => {},\n    })\n\n  $emphasizeMessage.subscribe({\n    next: ({ id }) => {\n      emphasizeMessage({ id })\n    },\n  })\n\n  $userTyping.subscribe({\n    next: startTyping,\n    complete: stopTyping,\n  })\n})\n"},"lineCount":null}},"error":null,"hash":"24cc2fa4413aa2a47359dcbc5f4f4411","cacheData":{"env":{}}}